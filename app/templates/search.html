<html>
	<head>
		<script type="text/javascript" src="https://d3js.org/d3.v5.min.js"> </script>

		{% if queryType == "movie" %}
			<link rel="stylesheet" type="text/css" href="/static/main_MB.css">
			<title>The Book Was Better.</title>
		{% else %}
			<link rel="stylesheet" type="text/css" href="/static/main_BM.css">
			<title>The Movie Was Better?</title>
		{% endif %}

		<link rel="stylesheet" type="text/css" href="/static/awesomplete/awesomplete.css">
		<script src="/static/awesomplete/awesomplete.js" async></script>
	</head>

	<script type="text/javascript">
		function useInspiration(queryType, insp){
			window.location.href = "/?queryType=" + queryType + "&query=" + insp;
		}
		function invertQueryType(queryType, query){
			if(query == 'None'){
				query = "";
			}	
			if(queryType == 'book'){
				window.location.href = "/?queryType=movie&query=";
			}
			else{
				window.location.href = "/?queryType=book&query=";
			}
		}
	</script>

	<body>
		<div id = "Header">
			{% if queryType == "movie" %}
				<h1>The Book Was Better.</h1>
				<h2>Literature recommendations for the age of film.</h2>
			{% else %}
				<h1>The Movie Was Better?</h1>
				<h2>Film recommendations for the post-literature age.</h2>
			{% endif %}
			
			
			<form id="inForm">
  				<h2>
	  				Input: {% if queryType == "movie" %} Movie {% else %} Book {% endif %}
	  				<button type = "button" class = "inspiration" style="font-size: 20px;" onclick="invertQueryType('{{queryType}}', '{{query}}')">â‡†</button> 
	  				Output: {% if outputType == "movie" %} Movie {% else %} Book {% endif %}
	  			</h2>

  				<div id = "inFormSearch">
  					<input class="awesomplete" id = "inFormSearchBar" name="query" data-list="{{validQueries}}" />
					<input type="hidden" id="queryType" name="queryType" value={{queryType}}>
  				</div>  				
        	</form>
		</div>

		<div id = "Output">
        	{% if isHomeScreen == True %}
        		<p>Not much of a movie buff?<br>Here's some inspiration!</p>
        		{% for i in inspiration %}
        			<button type = "button" class = "inspiration" onclick="useInspiration('{{queryType}}', '{{i[1]}}'.replace('%20','+'))">{{i[0]}}</button><br>
        		{% endfor %}
        	{% else %}
        		<h2>{{outputMessage}}</h2>
        	{% endif %}

        	{% if output %}
	            {% for o in output %}
	            	{% if queryType == "movie" %}
		            	<div class = "outputCard">
		                	<p class = "title">{{o["title"]}}</p>
		                	<p class = "author">{{o["author"]}}</p>
		                	<p><i>Similarity Score</i>: {{o["simScore"]}}</p>
		                	<p> 
		                	{{o["tropes"]}}</p>
		                </div> <br>
	                {% endif %}
	                {% if queryType == "book" %}
		            	<div class = "outputCard">
		                	<p class = "title">{{o["title"]}}</p>
		                	<p><i>Similarity Score</i>: {{o["simScore"]}}</p>
		                	<p> 
		                	{{o["tropes"]}}</p>
		                </div> <br>
	                {% endif %}
	            {% endfor %}
        	{% endif %}
		</div>
	</body>
</html>